/**
 * Smart Mall 设计系统 - 主入口文件
 * 
 * 导入顺序很重要：
 * 1. Variables - 变量定义（颜色、间距、字体等）
 * 2. Mixins - 可复用的样式混入
 * 3. Base - 重置和基础元素样式
 * 4. Animations - 动画关键帧和动画类
 * 5. Components - 可复用组件样式
 * 6. Utilities - 工具类（最后导入以确保优先级）
 */

// 1. 设计令牌和变量
@use 'variables' as *;

// 2. 混入函数
@use 'mixins' as *;

// 3. 基础样式和重置
@use 'base';

// 4. 动画
@use 'animations';

// 5. 组件样式
@use 'components';

// 6. 工具类
@use 'utilities';

// ========================================
// 应用级别的全局样式
// ========================================

// 应用根容器
#app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

// 主内容区域
.app-main {
  flex: 1;
  display: flex;
  flex-direction: column;
}

// 页面容器
.page-container {
  width: 100%;
  max-width: 1280px;
  margin: 0 auto;
  padding: $space-6;
}

// 全屏页面（如登录、注册）
.page-fullscreen {
  min-height: 100vh;
  @include flex-center;
}

// ========================================
// Element Plus 覆盖样式
// ========================================

// 统一 Element Plus 的圆角
.el-button {
  --el-border-radius-base: #{$radius-md};
}

.el-input {
  --el-input-border-radius: #{$radius-md};
}

.el-card {
  --el-card-border-radius: #{$radius-lg};
}

.el-dialog {
  --el-dialog-border-radius: #{$radius-lg};
}

// 暗色主题下的 Element Plus 调整
.dark {
  // 输入框
  .el-input__wrapper {
    background-color: $bg-secondary;
    box-shadow: 0 0 0 1px $border-subtle inset;

    &:hover {
      box-shadow: 0 0 0 1px $border-focus inset;
    }

    &.is-focus {
      box-shadow: 0 0 0 1px $accent-primary inset;
    }
  }

  // 选择器
  .el-select__wrapper {
    background-color: $bg-secondary;
    box-shadow: 0 0 0 1px $border-subtle inset;
  }

  // 卡片
  .el-card {
    background-color: $bg-secondary;
    border-color: $border-subtle;
  }

  // 对话框
  .el-dialog {
    background-color: $bg-secondary;
  }

  // 下拉菜单
  .el-dropdown-menu {
    background-color: $bg-secondary;
    border-color: $border-subtle;
  }

  // 表格
  .el-table {
    --el-table-bg-color: #{$bg-secondary};
    --el-table-tr-bg-color: #{$bg-secondary};
    --el-table-header-bg-color: #{$bg-tertiary};
    --el-table-border-color: #{$border-subtle};
  }

  // 分页
  .el-pagination {
    --el-pagination-bg-color: #{$bg-secondary};
    --el-pagination-button-bg-color: #{$bg-tertiary};
  }

  // 消息提示
  .el-message {
    --el-message-bg-color: #{$bg-secondary};
    border-color: $border-subtle;
  }

  // 通知
  .el-notification {
    --el-notification-bg-color: #{$bg-secondary};
    border-color: $border-subtle;
  }
}

// ========================================
// 响应式布局辅助
// ========================================

// 隐藏类
.hidden-xs {
  @include breakpoint-down(sm) {
    display: none !important;
  }
}

.hidden-sm {
  @include breakpoint-up(sm) {
    @include breakpoint-down(md) {
      display: none !important;
    }
  }
}

.hidden-md {
  @include breakpoint-up(md) {
    @include breakpoint-down(lg) {
      display: none !important;
    }
  }
}

.hidden-lg {
  @include breakpoint-up(lg) {
    @include breakpoint-down(xl) {
      display: none !important;
    }
  }
}

.hidden-xl {
  @include breakpoint-up(xl) {
    display: none !important;
  }
}

// 仅在特定断点显示
.visible-xs-only {
  @include breakpoint-up(sm) {
    display: none !important;
  }
}

.visible-sm-only {
  display: none !important;
  @include breakpoint-up(sm) {
    display: block !important;
  }
  @include breakpoint-up(md) {
    display: none !important;
  }
}

.visible-md-only {
  display: none !important;
  @include breakpoint-up(md) {
    display: block !important;
  }
  @include breakpoint-up(lg) {
    display: none !important;
  }
}

// ========================================
// 打印样式
// ========================================

@media print {
  *,
  *::before,
  *::after {
    background: transparent !important;
    color: #000 !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  a,
  a:visited {
    text-decoration: underline;
  }

  a[href]::after {
    content: " (" attr(href) ")";
  }

  img {
    page-break-inside: avoid;
  }

  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }

  h2, h3 {
    page-break-after: avoid;
  }

  // 隐藏不需要打印的元素
  .no-print,
  nav,
  aside,
  .sidebar {
    display: none !important;
  }
}
