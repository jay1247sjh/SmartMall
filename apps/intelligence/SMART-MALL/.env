# ============================================================
# Smart Mall Intelligence Service - 配置模板
# ============================================================
# 使用说明：
# 1. 复制此文件为 .env：cp .env.example .env
# 2. 填写必需的配置项（标记为 [必需] 的项）
# 3. 根据需要调整可选配置项
# 4. 敏感信息（API Key）请勿提交到版本控制
# ============================================================

# ============================================================
# 基础配置
# ============================================================

# 运行环境：development / staging / production
ENVIRONMENT=development

# 调试模式：true / false
DEBUG=true

# 服务名称
SERVICE_NAME=smart-mall-intelligence

# 服务间认证令牌（生产环境必需）
SERVICE_TOKEN=

# ============================================================
# CORS 配置
# ============================================================

# 允许的跨域来源（JSON 数组格式）
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]

# ============================================================
# LLM 配置
# ============================================================

LLM_PROVIDER=qwen

# --- 阿里云百炼 Qwen 配置（推荐） ---
QWEN_API_KEY=
QWEN_MODEL=qwen3-vl-plus
QWEN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
QWEN_VISION_MODEL=qwen3-vl-plus
QWEN_TEXT_MODEL=qwen-plus

# --- OpenAI 配置（备用） ---
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4
OPENAI_BASE_URL=https://api.openai.com/v1

# --- DeepSeek 配置（备用） ---
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# --- 本地模型配置 (Ollama) ---
LOCAL_MODEL_URL=http://localhost:11434
LOCAL_MODEL_NAME=llama2

# --- LLM 参数 ---
# 温度参数（0.0-2.0，越低越确定）
LLM_TEMPERATURE=0.3

# 最大生成 Token 数
LLM_MAX_TOKENS=2000

# 请求超时时间（秒）
LLM_TIMEOUT=30

# ============================================================
# Milvus 向量数据库配置
# ============================================================

# Milvus 服务地址
MILVUS_HOST=localhost
MILVUS_PORT=19530

# Milvus 认证（可选）
MILVUS_USER=
MILVUS_PASSWORD=

# Milvus 数据库名称
MILVUS_DB_NAME=smartmall

# Milvus 集合名称
MILVUS_COLLECTION_STORES=stores
MILVUS_COLLECTION_PRODUCTS=products
MILVUS_COLLECTION_LOCATIONS=locations

# ============================================================
# Embedding 配置
# ============================================================

# Embedding 提供商：qwen / openai / local
EMBEDDING_PROVIDER=qwen

# Embedding 模型名称
EMBEDDING_MODEL=text-embedding-v3

# 通义千问 Embedding
QWEN_EMBEDDING_MODEL=text-embedding-v3

# OpenAI Embedding
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# 本地 Embedding（BGE-M3 / M3E）
LOCAL_EMBEDDING_MODEL=BAAI/bge-m3

# Embedding 向量维度（根据模型调整）
# text-embedding-v3: 1024
# text-embedding-3-small: 1536
# bge-m3: 1024
EMBEDDING_DIMENSION=1024

# 文本分块配置
CHUNK_SIZE=512
CHUNK_OVERLAP=50

# ============================================================
# RAG 配置
# ============================================================

# 检索返回数量
RAG_TOP_K=5

# 相似度阈值（0.0-1.0）
RAG_SCORE_THRESHOLD=0.6

# 是否启用重排序
RAG_RERANK_ENABLED=false

# 是否启用缓存
RAG_CACHE_ENABLED=true

# 缓存过期时间（秒）
RAG_CACHE_TTL=300

# ============================================================
# 数据同步配置
# ============================================================

# 批量同步大小
SYNC_BATCH_SIZE=100

# 增量同步间隔（分钟）
SYNC_INTERVAL_MINUTES=5

# ============================================================
# PostgreSQL 配置（数据源）
# ============================================================

# PostgreSQL 服务地址
PG_HOST=localhost
PG_PORT=5433

# [必需] PostgreSQL 认证
PG_USER=smartmall
PG_PASSWORD=your_postgres_password_here

# PostgreSQL 数据库名称
PG_DATABASE=smartmall

# ============================================================
# Redis 配置
# ============================================================

# Redis 连接 URL
REDIS_URL=redis://localhost:6379/0

# 缓存过期时间（秒）
CACHE_TTL=300

# ============================================================
# 兼容旧配置（已废弃，保留向后兼容）
# ============================================================

VECTOR_DB_TYPE=milvus
VECTOR_DB_URL=http://localhost:19530
VECTOR_DB_API_KEY=
